================================================================
  CCFM 면담관리 시스템 - 설치 가이드
================================================================

이 앱은 면담 녹음 → AI 분석 → Notion 정리 → 텔레그램 알림을
자동으로 처리하는 웹앱입니다.


================================================================
  1. 사전 준비
================================================================

[필수 설치]
1) Node.js 18 이상
   → https://nodejs.org 에서 LTS 버전 다운로드 설치

2) pnpm (패키지 매니저)
   → 터미널에서: npm install -g pnpm

3) Git (선택, Vercel 배포 시 필요)
   → https://git-scm.com

[필수 계정]
- Notion 계정 (무료)
- OpenAI 계정 (유료 - Whisper STT 사용)
- Anthropic 계정 (유료 - Claude AI 분석 사용)
- Vercel 계정 (무료/Pro - 배포용)
- Telegram 계정 (무료 - 알림용, 선택)


================================================================
  2. API 키 발급
================================================================

[Notion API]
1) https://www.notion.so/my-integrations 접속
2) "새 통합 만들기" 클릭
3) 이름: "면담관리" 입력 후 생성
4) "내부 통합 시크릿" 복사 → NOTION_API_KEY
5) Notion에서 사용할 페이지 열기 → 우측 상단 ... → 연결 → 방금 만든 통합 추가
6) 해당 페이지 URL에서 ID 추출 → NOTION_PARENT_PAGE_ID
   (URL: notion.so/페이지이름-XXXXXXXX ← 이 32자리가 ID)

※ NOTION_PERSONS_DB_ID, NOTION_INTERVIEWS_DB_ID는 비워두세요.
  첫 실행 시 자동으로 데이터베이스가 생성됩니다.
  생성 후 Vercel 환경변수에 해당 ID를 추가하면 됩니다.

[OpenAI API]
1) https://platform.openai.com/api-keys 접속
2) "Create new secret key" 클릭
3) 키 복사 → OPENAI_API_KEY
4) https://platform.openai.com/account/billing 에서 크레딧 충전 필요
   (Whisper STT 사용료: 약 $0.006/분)

[Anthropic API]
1) https://console.anthropic.com 접속
2) API Keys → Create Key
3) 키 복사 → ANTHROPIC_API_KEY
4) 크레딧 충전 필요 (Claude 분석 사용)

[Vercel Blob]
1) Vercel 대시보드 → 프로젝트 → Storage 탭
2) Blob Store 생성
3) 토큰 복사 → BLOB_READ_WRITE_TOKEN

[Telegram 봇 (선택)]
1) Telegram에서 @BotFather 검색
2) /newbot 명령어로 봇 생성
3) 봇 토큰 복사 → TELEGRAM_BOT_TOKEN
4) 봇에게 아무 메시지 보내기 (채팅 활성화)


================================================================
  3. 프로젝트 설정
================================================================

1) 이 폴더를 원하는 위치에 복사

2) 터미널에서 폴더로 이동:
   cd ccfm-deploy

3) 의존성 설치:
   pnpm install

4) 환경변수 설정:
   .env.example 파일을 복사하여 .env.local 생성
   cp .env.example .env.local    (Mac/Linux)
   copy .env.example .env.local  (Windows)

   .env.local 파일을 열어 발급받은 키를 입력

5) Notion 데이터베이스 초기 생성:
   pnpm setup-notion

6) 로컬 실행:
   pnpm dev

   → 브라우저에서 http://localhost:3000 접속


================================================================
  4. Vercel 배포 (인터넷에서 접속 가능하게)
================================================================

[방법 1: Vercel CLI]
1) npm install -g vercel
2) vercel login
3) 프로젝트 폴더에서: vercel
4) 안내에 따라 설정
5) 환경변수 등록:
   vercel env add NOTION_API_KEY
   vercel env add OPENAI_API_KEY
   ... (모든 환경변수 등록)
6) 재배포: vercel --prod

[방법 2: GitHub + Vercel (추천)]
1) GitHub에 새 저장소 생성
2) 프로젝트를 push:
   git init
   git add .
   git commit -m "초기 배포"
   git remote add origin https://github.com/계정/저장소.git
   git push -u origin main
3) https://vercel.com/new 에서 GitHub 저장소 연결
4) Environment Variables에 모든 키 입력
5) Deploy 클릭

[Vercel 요금제]
- Hobby (무료): 서버리스 함수 10초 제한 → 짧은 녹음만 가능
- Pro ($20/월): 서버리스 함수 300초 제한 → 긴 녹음도 가능 (권장)


================================================================
  5. 모바일에서 앱처럼 사용하기
================================================================

이 앱은 PWA(Progressive Web App)를 지원합니다.

[Android]
1) Chrome에서 배포된 URL 접속
2) 주소창 우측 "홈 화면에 추가" 또는 메뉴 → "앱 설치"

[iPhone]
1) Safari에서 배포된 URL 접속
2) 하단 공유 버튼 → "홈 화면에 추가"


================================================================
  6. 사용 방법
================================================================

1) 앱 실행 후 "면담 녹음" 탭 선택
2) 직접 녹음 또는 파일 업로드
3) 대상자 선택 (없으면 추가)
4) 자동 처리: 음성인식 → AI 분석 → Notion 저장 → 텔레그램 알림
5) 대상자별 면담 기록 확인, AI 채팅으로 추가 인사이트 획득


================================================================
  7. 폴더 구조
================================================================

ccfm-deploy/
├── src/
│   ├── app/            # 페이지 및 API 라우트
│   ├── components/     # UI 컴포넌트
│   └── lib/            # 유틸리티 (Notion, Claude, Telegram 등)
├── public/             # 정적 파일 (PWA 아이콘 등)
├── scripts/            # Notion DB 초기 설정 스크립트
├── .env.example        # 환경변수 템플릿
├── package.json        # 의존성 목록
└── 설치가이드.txt       # 이 파일


================================================================
  8. 문제 해결
================================================================

Q: "면담 처리 실패" 에러가 뜸
A: Vercel 대시보드 > Logs에서 에러 확인.
   - Connection error → 네트워크 일시 장애, 자동 재시도됨
   - 429 quota exceeded → OpenAI 크레딧 소진, 충전 필요
   - 504 timeout → Vercel Pro 필요 (긴 녹음 파일)

Q: Notion에 카드가 안 생김
A: Notion 통합이 해당 페이지에 연결되어 있는지 확인.
   페이지 우측 상단 ... → 연결 → 통합 추가

Q: 텔레그램 알림이 안 옴
A: 봇에게 먼저 메시지를 보내야 채팅이 활성화됨.
   TELEGRAM_BOT_TOKEN이 정확한지 확인.

================================================================
  비용 안내 (월 기준 대략)
================================================================

- Vercel Pro: $20/월 (긴 녹음 처리 시 필수)
- OpenAI (Whisper): ~$0.006/분 (30분 녹음 약 $0.18)
- Anthropic (Claude): 분석당 약 $0.01~0.03
- Notion: 무료
- Telegram: 무료

→ 하루 3건 30분 면담 기준: 월 약 $25~30 예상
================================================================
