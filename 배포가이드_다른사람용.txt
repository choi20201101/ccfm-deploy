================================================================
  CCFM 면담관리 시스템 - 배포 가이드 (다른 사람용)
================================================================

이 가이드를 따라하면 코딩 없이 나만의 면담관리 앱을 만들 수 있습니다.
총 소요시간: 약 20~30분


================================================================
  전체 순서 요약
================================================================

1단계: 필요한 계정 가입 (5분)
2단계: API 키 발급 (10분)
3단계: Vercel 배포 (5분)
4단계: Vercel Blob 설정 (3분)
5단계: Notion 연결 (2분)
6단계: 텔레그램 봇 설정 (3분)
7단계: 모바일 앱 설치 (1분)


================================================================
  1단계: 필요한 계정 가입
================================================================

아래 4개 사이트에 가입하세요 (모두 무료 가입 가능):

1. GitHub: https://github.com/signup
   → 코드 저장소 (이미 있으면 넘어가기)

2. Vercel: https://vercel.com/signup
   → GitHub 계정으로 로그인하면 됨
   → 앱을 인터넷에 배포하는 서비스

3. OpenAI: https://platform.openai.com/signup
   → 음성인식(Whisper) API 사용

4. Anthropic: https://console.anthropic.com
   → AI 분석(Claude) API 사용


================================================================
  2단계: API 키 발급
================================================================

메모장을 열어서 아래 키들을 하나씩 발급받아 적어두세요.

────────────────────────────────
[A] Notion API 키
────────────────────────────────

1. https://www.notion.so/my-integrations 접속
2. "새 통합 만들기" 클릭
3. 이름: "면담관리" 입력
4. 유형: "내부" 선택
5. "제출" 클릭
6. "내부 통합 시크릿" 옆 "표시" → 복사

   ★ 메모: NOTION_API_KEY = ntn_xxxxxxxxxxxxx

7. Notion에서 면담 데이터를 저장할 페이지 하나 생성
   (예: "면담관리" 페이지)
8. 그 페이지 우측 상단 ... 클릭 → "연결" → 방금 만든 "면담관리" 통합 추가
9. 그 페이지의 URL을 복사
   URL 예시: https://www.notion.so/면담관리-abc123def456789...
   맨 뒤 32자리(영문+숫자)가 페이지 ID

   ★ 메모: NOTION_PARENT_PAGE_ID = abc123def456789...

────────────────────────────────
[B] OpenAI API 키 (음성인식용)
────────────────────────────────

1. https://platform.openai.com/api-keys 접속
2. "Create new secret key" 클릭
3. 이름: "면담관리" → "Create" 클릭
4. 키 복사 (한번만 표시됨, 꼭 복사!)

   ★ 메모: OPENAI_API_KEY = sk-proj-xxxxxxxxxxxxx

5. 크레딧 충전 (필수!):
   https://platform.openai.com/account/billing
   → "Add payment method" → 카드 등록
   → "Add to credit balance" → $10~20 충전
   (30분 면담 1건당 약 $0.18, 매우 저렴)

────────────────────────────────
[C] Anthropic API 키 (AI 분석용)
────────────────────────────────

1. https://console.anthropic.com 접속
2. 좌측 메뉴 "API Keys" 클릭
3. "Create Key" 클릭 → 이름 입력 → 생성
4. 키 복사

   ★ 메모: ANTHROPIC_API_KEY = sk-ant-xxxxxxxxxxxxx

5. 크레딧 충전:
   Settings → Billing → 카드 등록 → $10~20 충전

────────────────────────────────
[D] Telegram 봇 토큰 (알림용, 선택)
────────────────────────────────

1. Telegram 앱에서 @BotFather 검색하여 대화 시작
2. /newbot 입력
3. 봇 이름 입력 (예: 면담알림봇)
4. 봇 username 입력 (예: myinterview_bot)
5. 토큰이 표시됨 → 복사

   ★ 메모: TELEGRAM_BOT_TOKEN = 1234567890:ABCDEFG...

6. 생성된 봇에게 아무 메시지 하나 보내기 (채팅 활성화 필수!)


================================================================
  3단계: Vercel 배포
================================================================

1. 아래 링크를 클릭하세요 (원클릭 배포):

   https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fchoi20201101%2Fccfm-deploy&env=NOTION_API_KEY,NOTION_PARENT_PAGE_ID,ANTHROPIC_API_KEY,OPENAI_API_KEY,BLOB_READ_WRITE_TOKEN,TELEGRAM_BOT_TOKEN,NEXT_PUBLIC_APP_URL

2. GitHub 계정으로 로그인

3. "Create Git Repository" 에서 Repository Name 입력
   (예: my-interview-app)

4. "Environment Variables" 섹션이 나타남
   → 2단계에서 메모한 키들을 하나씩 입력:

   NOTION_API_KEY         = ntn_xxxxx (메모한 값)
   NOTION_PARENT_PAGE_ID  = abc123... (메모한 값)
   ANTHROPIC_API_KEY      = sk-ant-xxxxx (메모한 값)
   OPENAI_API_KEY         = sk-proj-xxxxx (메모한 값)
   BLOB_READ_WRITE_TOKEN  = (4단계에서 설정, 일단 비워두기)
   TELEGRAM_BOT_TOKEN     = 1234567890:ABC... (메모한 값, 없으면 비워두기)
   NEXT_PUBLIC_APP_URL    = (배포 후 설정, 일단 비워두기)

5. "Deploy" 클릭 → 1~2분 대기

6. 배포 완료! URL이 표시됨 (예: https://my-interview-app.vercel.app)

   ★ 메모: 내 앱 URL = https://xxxxxx.vercel.app


================================================================
  4단계: Vercel Blob 설정 (파일 저장소)
================================================================

1. Vercel 대시보드 (https://vercel.com) → 방금 만든 프로젝트 클릭
2. 상단 "Storage" 탭 클릭
3. "Create Database" → "Blob" 선택 → "Continue"
4. Store 이름 입력 (예: interview-files) → "Create"
5. 연결 완료되면 자동으로 환경변수가 추가됨

   만약 자동 추가 안 되면:
   → Storage 상세 페이지에서 토큰 복사
   → Settings → Environment Variables 에서 직접 추가:
     BLOB_READ_WRITE_TOKEN = vercel_blob_rw_xxxxx

6. NEXT_PUBLIC_APP_URL도 설정:
   → Settings → Environment Variables
   → NEXT_PUBLIC_APP_URL = https://내앱이름.vercel.app

7. 상단 "Deployments" 탭 → 가장 최근 배포 옆 ... → "Redeploy"
   (환경변수 변경 후 재배포 필요)


================================================================
  5단계: Notion 연결 확인
================================================================

1. 배포된 앱 URL 접속 (https://내앱이름.vercel.app)
2. 처음 접속하면 Notion에 자동으로 데이터베이스가 생성됨:
   - "인원 관리" DB
   - "면담 기록" DB
3. Notion 페이지에 가서 DB가 생겼는지 확인

   ※ 만약 에러가 나면:
   - Notion 페이지에 통합이 연결되어 있는지 확인
   - 페이지 → ... → 연결 → "면담관리" 통합이 있어야 함


================================================================
  6단계: 텔레그램 알림 설정 (선택)
================================================================

1. 앱에서 면담을 한번 처리하면 자동으로 텔레그램 봇이 활성화됨
2. 봇에게 먼저 메시지를 보내야 알림 수신 가능
3. 면담 완료 시 자동으로 알림이 옴:
   ✅ 면담 분석 완료
   👤 이름
   📅 날짜
   📝 요약
   🔗 Notion 링크


================================================================
  7단계: 모바일 앱처럼 설치
================================================================

[Android 폰]
1. Chrome에서 배포된 URL 접속
2. 주소창 오른쪽 또는 메뉴(⋮) → "홈 화면에 추가" 또는 "앱 설치"
3. 바탕화면에 앱 아이콘 생성!

[iPhone]
1. Safari에서 배포된 URL 접속
2. 하단 공유 버튼(□↑) → "홈 화면에 추가"
3. 바탕화면에 앱 아이콘 생성!


================================================================
  사용 방법
================================================================

1. 앱 실행
2. 하단 "면담 녹음" 탭 선택
3. "직접 녹음" 또는 "파일 업로드" 선택
4. 녹음/파일 선택 후 대상자 선택
5. 자동 처리 시작:
   오디오 → 텍스트 변환 → AI 분석 → Notion 저장 → 텔레그램 알림
6. 대상자 페이지에서 면담 기록 확인
7. 카드 클릭 → AI 채팅으로 추가 질문 가능


================================================================
  Vercel 요금제 안내
================================================================

[Hobby - 무료]
- 서버 처리 시간: 최대 10초
- 짧은 녹음(1~2분)만 가능
- 테스트용으로 적합

[Pro - $20/월] ← 권장
- 서버 처리 시간: 최대 300초 (5분)
- 30분 이상 녹음도 처리 가능
- 실제 업무용으로 필수

→ 업그레이드: Vercel 대시보드 → Settings → Billing → Upgrade to Pro


================================================================
  월 예상 비용
================================================================

- Vercel Pro: $20/월
- OpenAI (음성인식): 30분 면담 1건 약 $0.18
- Anthropic (AI 분석): 1건당 약 $0.01~0.03
- Notion: 무료
- Telegram: 무료

예시) 하루 3건, 30분 면담 기준:
  → 월 약 $25~30 (약 35,000~40,000원)


================================================================
  문제가 생겼을 때
================================================================

Q: "면담 처리 실패" 에러
A: 다시 시도하세요. 네트워크 문제면 자동 재시도됩니다.
   계속 실패하면 → OpenAI 크레딧 잔액 확인

Q: 429 에러 (quota exceeded)
A: OpenAI 크레딧이 소진됨
   → https://platform.openai.com/account/billing 에서 충전

Q: 504 timeout 에러
A: Vercel Pro 업그레이드 필요 (무료 플랜은 10초 제한)

Q: Notion에 카드가 안 생김
A: Notion 페이지에 통합이 연결되어 있는지 확인
   → 페이지 → ... → 연결 → 통합 추가

Q: 텔레그램 알림이 안 옴
A: 봇에게 먼저 메시지를 보내셨는지 확인


================================================================
  문의
================================================================

GitHub: https://github.com/choi20201101/ccfm-deploy
================================================================
